var orderDetailTemplate='<tr><td><select class="form-control product-list" name="odetails[0].P_ID" required><\/select><\/td><td><input type="number" class="form-control quantity" name="odetails[0].Od_Quantity" min="1" value="1" required /><\/td><td><span class="form-control price">0<\/span><\/td><td><span class="total-price">0<\/span><\/td><td><button type="button" class="btn btn-danger delete-order-detail">Delete<\/button><\/td><\/tr>';$(function(){function n(){var n=0;$(".total-price").each(function(){var t=parseFloat($(this).text());isNaN(t)||(n+=t)});$("#total-price").text(n.toFixed(0));$("#ordertotalprice").text(n.toFixed(0))}function t(){var t=$(this).closest("tr"),u=$(this).val(),i=t.find(".quantity").val(),r=t.find(".price").text();t.find(".total-price").text((r*i).toFixed(0));n()}$("#add-order-detail").on("click",function(){for(var i=$("#order-detail-list tr").length,t=$(orderDetailTemplate.replace(/\[0\]/g,"["+i+"]")),r=t.find(".product-list"),n=0;n<products.length;n++)r.append($("<option>",{value:products[n].P_ID,text:products[n].P_Name}));$("#order-detail-list").append(t)});$(document).on("change",".product-list",function(){var t=$(this).closest("tr"),i=$(this).val();$.ajax({url:`${getprice}`,type:"GET",data:{productId:i},success:function(i){var r=t.find(".quantity").val();t.find(".price").text(i.toFixed(0));t.find(".total-price").text((i*r).toFixed(0));n()},error:function(){alert("Error occurred while getting product price.")}})});$(document).on("change","#quantity",t);$(document).on("click",".delete-order-detail",function(){var t=$(this).data("order-detail-id"),i=$(this).closest("tr");t?confirm("Are you sure you want to delete this order detail?")&&$.ajax({url:`${deletedetail}`,type:"POST",data:{orderDetailId:t},success:function(){i.remove();n()},error:function(){alert("Error occurred while deleting order detail.")}}):(i.remove(),n())})});